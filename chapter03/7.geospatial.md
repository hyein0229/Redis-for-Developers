# Geospatial
- Geospatial 자료 구조는 경도, 위도 데이터 쌍의 집합으로 간편하게 지리 데이터를 저장할 수 있는 방법이다.
- 내부적으로 데이터는 sorted set 으로 저장되며, 하나의 자료 구조 안에 키는 중복되어 저장할 수 없다.

## Command 종류
### `GEOADD`
- GEOADD key 경도 위도 member 순서로 입력한다. 
- NX 옵션이 있으면 아이템이 없는 경우에만 데이터를 저장하고, XX 옵션이 있으면 아이템이 있는 경우에만 저장한다.
```shell
127.0.0.1:6379> GEOADD places 126.9784 37.5665 Seoul
(integer) 1

127.0.0.1:6379> GEOADD places 139.6917 35.6895 Tokyo
(integer) 1
```

### `GEOPOS`
지정한 위치 데이터를 조회할 수 있다. 한 번에 여러 위치 조회도 가능하다.
```shell
127.0.0.1:6379> GEOPOS places "Seoul" "Tokyo"
1) 1) "126.97840064764023"
   2) "37.56650030628725"
2) 1) "139.691701233387"
   2) "35.68950126697936"
```

### `GEODIST`
두 아이템 사이의 거리를 반환할 수 있으며 단위는 m, km, mi, ft 선택이 가능하다.
```shell
127.0.0.1:6379> GEODIST places "Seoul" "Tokyo" km
"1152.9085"
```

### `GEOSEARCH`
- 특정 위치를 기준으로 원하는 거리 내에 있는 데이터를 빠르게 검색할 수 있다.
- BYRADIUS 옵션을 사용하면 반경 거리를 기준으로, 
- BYBOX 옵션은 직사각형 거리를 기준으로 데이터를 조회할 수 있다.
```shell
127.0.0.1:6379> GEOSEARCH places FROMLONLAT 126.9784 37.5665 BYRADIUS 1000 km ASC
1) "Seoul"
```

Geospatial 의 자세한 내용은 4장 참고