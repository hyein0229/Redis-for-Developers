# NoSQL 의 등장
## NoSQL 의 등장 배경
- 소프트웨어의 핵심은 데이터며, 올바른 데이터 저장소의 운영은 곧 애플리케이션의 성능, 확장성, 가용성, 신뢰성 등과 이어진다.
- 디지털 산업의 성장은 중앙 집약적인 모놀리틱 아키텍처에서 마이크로서비스 아키텍처(MSA)로 점차 변화하고 있다.
- 이러한 아키텍처 변화에 따라서 데이터 저장소의 특징이 다양하게 발전해 왔다.
    - 소프트웨어 아키텍처 변화에 따라 현대의 데이터 저장소가 어떤 요구 사항을 해결하기 위해 발전했을까

### 모놀리틱 아키텍처(Monolithic Architecture)
- 전통적인 소프트웨어 개발 모델
- 전체 애플리케이션을 하나의 통합된 패키지로 개발, 배포하는 방식이다.
- 작은 규모의 프로젝트, 애플리케이션에선 모놀리틱 구조가 운영에 쉬울 수 있다.
- 한계점
    - 서비스의 규모가 확장될 수록 유지보수의 복잡도가 증가한다.
    - 한 개의 시스템에 문제가 발생하면 이는 곧 전체 시스템의 장애로 이어진다.
    - 하나의 모듈을 수정하면 전체 애플리케이션을 다시 배포해야 하므로 서버의 기동과 빌드, 배포에 드는 시간이 길어진다.
    - 대량의 트래픽, 복잡한 트랜잭션 등 요구 사항에 유연하게 대처하기가 어렵다.
    - 프레임워크나 언어의 변경이 전체 애플리케이션에 영향을 끼치므로 작은 기능을 변경하는 것에도 어려움이 있다.
    - 하나의 요소를 변경하면 전체가 영향이 있으니 업데이트와 릴리스가 느려질 수 밖에 없다.
    - 서비스 중 하나의 파트에 리소스가 보자라 확장을 하고 싶어도 전체를 확장할 수밖에 없고, 이는 리소스 낭비로 이어질 수 있다.
    
### 마이크로서비스 아키텍처(MicroService Architecture; MSA)
- 마이크로서비스는 '독립된' 각각의 모듈을 조립해 하나의 서비스를 만드는 아키텍처이다.
- 즉, 기능별로 작게 나뉘어진 서비스가 독립적으로 동작하는 서비스이다.
- 따라서 업데이트, 테스트, 배포, 확장 모든 것이 각 서비스별로 독립적으로 수행될 수 있다.
- 만약, 빠르게 성장하는 프로젝트라면 MSA 구조를 채택하는 것이 도움될 수 있다.
- 이점
    - 새로운 기능을 추가하여 배포하는 것이 비교적 편리하여 요구 사항에 대응하기가 쉬워진다.
    - 하나의 애플리케이션 내의 특정 서비스가 규모가 커지면 해당 서비스만 쉽게 확장할 수 있으므로 유연한 관리가 가능하다.
    - 각 서비스는 독립적이므로 서비스에 맞게 개발 도구를 자유롭게 선택할 수 있어 기술 발전이 활성화된다.
    - 서비스 독립성 덕분에 한 서비스의 문제가 다른 서비스에 큰 영향을 주지 않아 안전성이 향상된다.
- 하지만, 이 모든 장점에도 불구하고 모든 서비스가 이 구조에 적합한 것은 아니다.
- 개발 및 운영을 위해 대규모 인원이 투입될 수 있는 서비스에선 장점을 누릴 수 있으나, 소규모는 서비스 분리로 인해 오히려 관리의 복잡도와 운영 부담이 증가할 수 있다.

### 데이터 저장소 요구 사항의 변화
- 모놀리틱 서비스에서의 가장 많이 사용된 DB
    - Oracle, MySQL 등의 RDB
- 관계형 데이터베이스(RDBMS) 특징 및 한계
    - 고정된 스키마를 가짐
    - 모든 데이터를 행과 열로 구성된 고정된 스키마를 가진 테이블에 저장
    - 각 테이블 간의 관계를 명확하게 규정
    - 테이블 간의 관계는 애플리케이션이 커질수록 매우 복잡해지고, 데이터를 추출하기 위한 쿼리도 복잡해짐
    - 관계 간의 복잡도가 올라갈 수록 쿼리 성능 문제가 발생하고, 성능 향상을 위해 쿼리, 인덱스, 스키마 등을 자주 최적화가 필요해짐
- 최근 서비스에서의 경향
    - 정해진 형태가 없고, 크기와 구조를 예측할 수 없는 비정형 데이터의 증가
    - 비정형 데이터는 다차원적이거나 깊은 계층 구조를 가질 수 있어 RDB 의 정형화된 테이블에선 관리가 어려움
    - RDB 에 어울리지 않는 예시
        - 그래프화된 데이터
        - 실시간 로그 데이터와 같은 시계열 데이터를 실시간으로 저장하는 서비스는 쓰기 성능 이슈 발생
        - JSON 데이터 (굉장히 다양한 필드)
- RDB 테이블 구조 변경의 어려움
    - 관계형 데이터베이스를 사용하는 일부 기업에선 구조 변경을 위해선 복잡한 데이터 관리 체계를 가짐
    - 데이터 아키텍트(DA)의 승인을 거치고, DBA 가 작업을 진행하는 관리 체계로 인해 개발이 느려짐
    - 반면, NoSQL의 경우 개발 팀이 바로 데이터 구조를 바꿀 수 있으므로 빠른 개발이 가능해짐
- 따라서 관계형 데이터베이스만 고집한다면 복잡하고 비효율적인 데이터 모델을 가지게 된다.
- 비즈니스 특성과 데이터 형태를 고려하여 RBD, NoSQL 선택을 해야 한다. 
- MSA 에서의 핵심
    - 각 서비스가 독립적으로 동ㄹ작할 수 있도록 하나의 서비스가 다른 서비스와 밀접하게 연관되지 않아야 한다는 점
    - 즉, 각각의 서비스가 스스로의 상태를 유지해야 하고, 상태 분리를 위해선 독립된 데이터 저장소가 필요
    - 각 서비스는 독립적으로 스스로 역할을 수행하기 위해 서비스별 특성에 따라 RDB, NoSQL 중 선택해서 사용할 수 있다.
