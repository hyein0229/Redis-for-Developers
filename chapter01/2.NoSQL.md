# NoSQL 이란?
## NoSQL 정의 및 특징
- No SQL 혹은 Not Only SQL 의미
- 즉, 관계형 데이터베이스에서 사용하는 SQL 을 사용하지 않는 데이터 저장소를 말한다.
- NoSQL 의 공통 특징은 RDB 와 다르게 관계가 정의돼 있지 않은 데이터를 저장한다는 점이다.
- 아래는 NoSQL 의 일반적 특징이다.
- `실시간 응답`
    - 연구에 따르면 사람은 100ms 가 넘어가면 지연이 있다고 인지한다고 한다. 
    - 따라서 데이터 저장소에서 데이터를 가져올 때 발생할 수 있는 지연은 0~1ms 이내여야 한다.
    - MSA 내에서의 저장소에선 빠른 응답이 더욱 중요하다. 
    - 왜? 각각의 개별 저장소가 빠르게 동작하지 않을 때, 서비스 자체가 병목 현상을 유발할 수 있다.
- `확장성`
    - 서비스의 업그레이드로 인한 계획적 확장이나, 예상치 못한 순간의 트래픽 이벤트로 인한 트랜잭션 증가에 유연한 확장
- `고가용성`
    - 애플리케이션에서 데이터 저장소를 사용할 수 없는 상황은 서비스의 장애로 이어진다.
    - 따라서 데이터 저장소는 장애 상황에도 신속하게 복구되어 항상 사용할 수 있는 상태를 유지해야 한다.
- `클라우드 네이티브`
    - 클라우드 발전으로 인해서 DB 관리도 간편해졌다.
    - 클라우드 제공 업체에서 제공하는 DBaas 를 사용하면 직접 설치, 운영 필요 없이 바로 사용할 수 있다.
    - 운영을 위한 모니터링과 알람도 제공되므로 데이터베이스 사용을 위한 번거로움이 줄어든다.
- `단순성`
    - MSA 구조 자체가 관리 포인트가 늘어나므로, 개발자와 운영자는 데이터 저장소를 간단하게 사용하고 싶어진다.
    - 또한 한 가지의 데이터 모델이 모든 서비스에 최적화되진 않기 때문에 멀티 모델 데이터베이스를 사용하길 원한다.
    - 즉, 각 서비스에 맞춰 가장 적합한 데이터 모델을 선택하여 사용
- `유연성`
    - 다양한 유형의 비정형 데이터가 급속하게 많아짐
    - 이러한 다양한 유형의 데이터를 적합한 형식으로 저장하기 위해 NoSQL 사용

## NoSQL 데이터 저장소 유형
### 그래프 유형
- 그래프 DB 는 엔티티 간의 관계를 효율적으로 저장하도록 설계되었다.
- 구성 요소
    - 노드(node): 데이터의 엔티티
    - 에지(edge): 데이터 사이의 관계
        - 항상 시작 노드, 끝 노드, 유형과 방향을 가짐
        - 상-하위 관계, 동작, 소유자 등의 정보를 저장
    - 속성(properties): 노드나 에지가 가지는 키-값 정보
- 그래프 DB 는 관계를 저장하고 표현할 때 유용하게 사용될 수 있다.
- 하지만, 저장되는 속성의 크기가 크거나, 매우 많은 속성을 저장할 땐 적합하지 않은 경우가 많다.
- 적합한 경우
    - 추천 서비스
    - SNS 에서 친구 관계를 통해 새로운 친구를 추천해주는 경우
    - 쇼핑몰에서 관심 분야나 구매 이력이 비슷한 다른 유저가 구입한 제품 추천
    - 소셜 미디어
    - 사기 감지 (의심되는 관계 연결 탐색)
- 종류: Neo4j 등

### 칼럼 유형
- 칼럼 유형 NoSQL 은 테이블을 행이 아닌 열을 기준으로 저장한다는 철학으로 설계되었다.
- 칼럼 지향적(column oriented) 또는 와이드 칼럼(wide column) 유형이라고도 부른다. 
- 이점
    - 데이터는 하나의 열에 중첩된 키-값 형태로 저장될 수 있어 RDB 보다 유연한 스키마를 저장할 수 있다.
    - 대량의 데이터에 대한 집계 쿼리를 다른 유형보다 훨씬 빠르게 처리할 수 있다.
- 적합한 경우
    - 기업의 BI 분석을 위한 데이터 웨어하우스에 유용하게 사용
    - 분석, 보고, 빅데이터 처리에 적합
- 종류: Apache Cassandra, HBase 등
```json
Row Key: user:1
---------------------------------------------
| Column Family: profile                    |
|  name: "Alice"                            |
|  age: 30                                  |
|  email: "alice@example.com"              |
---------------------------------------------
| Column Family: preferences                |
|  color: "blue"                            |
|  language: "english"                      |
---------------------------------------------
```
- row-key 는 어떤 엔티티를 식별하는 것
- 컬럼 패밀리는 같은 성격의 컬럼들을 모아놓은 집합의 개념
- 특정 컬럼만을 조회할 수 있어 효율적

### 문서 유형
- 문서 유형은 JSON 형태로 데이터가 저장되어, 개발자가 편하게 사용할 수 있는 구조이다.
- 개발자의 프로그램 코드와 동일한 형태로 저장되어 효율적이고 직관적으로 데이터를 사용할 수 있다.
- 스키마가 따로 정해져 있지 않아 애플리케이션에 맞게 데이터를 그대로 저장할 수 있어 유연성이 크다.
- 이 유형에선 모든 값이 항상 키와 연결되는 계층적(nested 구조) 트리와 같은 구조를 갖는다.
- 문서 단위로 CRUD 가능
- 적합한 경우
    - 데이터를 저장하거나 검색하는 데 효과적
- 종류: MongoDB, CouchDB, AWS DocumentDB 등

### 키-값 유형
- 키-값 유형은 가장 단순하고 빠르다.
- 여기서 키는 RDB 의 PK 라고 할 수도 있으며, 데이터를 정의하는 역할을 한다.
- 모든 값은 키에 연결되어 있고, 키 자체도 유의미한 데이터이다.
- 키를 사용하여 값을 검색할 수 있고, 키를 삭제하면 값도 삭제된다.
- 데이터의 저장이 매우 간단하므로 다른 유형보다 수평적 확장이 쉽다.
- 단순성으로 인해 빠른 데이터 액세스와 처리 속도가 보장된다.
- 적합한 경우
    - 게임이나 IoT 와 같이 실시간 서비스에서 응답 속도가 빨라야 하는 경우
    - 특히 로그를 남기는 작업이나 대규모 세션을 실시간 관리해야 하는 상황처럼 latency 최소화가 필요한 경우
- 종류: Redis, AWS ElastiCache, AWS DynamoDB, Oracle NoSQL Database, Memcached 등


